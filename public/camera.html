<!DOCTYPE html>
<html lang="th">
<head>
  <meta charset="UTF-8">
  <title>Camera</title>
  <link rel="stylesheet" href="css/camera.css">
</head>
<body>
  <!-- Topbar -->
  <header class="topbar">
    <div class="topbar-inner">
      <span class="brand">CareEmotion</span>
    </div>
  </header>

  <!-- Back button -->
  <a href="index.html" class="back-btn">
    <img src="/assets/backarrow.png" alt="Back">
  </a>

  <h1>Real-Time Webcam</h1>
  <!-- Start button -->
  <button id="startBtn">Start Camera</button>

  <!-- Info-card -->
  <div class="info-card">
    <div class="info-section">
      <h3>‡∏Ñ‡∏≥‡πÅ‡∏ô‡∏∞‡∏ô‡∏≥‡πÉ‡∏ô‡∏Å‡∏≤‡∏£‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°</h3>
      <ul>
        <li>‡πÉ‡∏ä‡πâ‡∏ô‡πâ‡∏≥‡πÄ‡∏™‡∏µ‡∏¢‡∏á‡πÅ‡∏•‡∏∞‡∏ó‡πà‡∏≤‡∏ó‡∏≤‡∏á‡∏≠‡πà‡∏≠‡∏ô‡πÇ‡∏¢‡∏ô‡∏Ç‡∏ì‡∏∞‡∏à‡∏±‡∏ö‡∏†‡∏≤‡∏û</li>
        <li>‡∏ó‡∏≥‡πÉ‡∏´‡πâ‡πÄ‡∏î‡πá‡∏Å‡∏™‡∏ö‡∏≤‡∏¢‡πÉ‡∏à ‡πÑ‡∏°‡πà‡∏Å‡∏±‡∏á‡∏ß‡∏•‡∏Å‡∏±‡∏ö‡∏Å‡∏•‡πâ‡∏≠‡∏á</li>
        <li>‡∏ö‡∏±‡∏ô‡∏ó‡∏∂‡∏Å‡∏ú‡∏•‡∏≠‡∏¢‡πà‡∏≤‡∏á‡∏™‡∏°‡πà‡∏≥‡πÄ‡∏™‡∏°‡∏≠‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏î‡∏π‡πÅ‡∏ô‡∏ß‡πÇ‡∏ô‡πâ‡∏°‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå</li>
        <li>‡πÉ‡∏ä‡πâ‡∏ú‡∏•‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå‡πÄ‡∏õ‡πá‡∏ô‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏õ‡∏£‡∏∞‡∏Å‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏™‡∏±‡∏á‡πÄ‡∏Å‡∏ï ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πà‡∏Å‡∏≤‡∏£‡∏ï‡∏±‡∏î‡∏™‡∏¥‡∏ô‡πÄ‡∏û‡∏µ‡∏¢‡∏á‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏î‡∏µ‡∏¢‡∏ß</li>
      </ul>
    </div>
    <div class="info-section">
      <h3>‡∏ß‡∏¥‡∏ò‡∏µ‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô‡πÇ‡∏´‡∏°‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå (Real-Time Webcam)</h3>
      <ol>
        <li>‡πÄ‡∏õ‡∏¥‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á ‡∏ú‡πà‡∏≤‡∏ô‡∏õ‡∏∏‡πà‡∏° "Start Camera" </li>
        <li>‡∏≠‡∏ô‡∏∏‡∏ç‡∏≤‡∏ï‡∏™‡∏¥‡∏ó‡∏ò‡∏¥‡πå‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏Å‡∏•‡πâ‡∏≠‡∏á</li>
        <li>‡∏£‡∏∞‡∏ö‡∏ö‡∏à‡∏∞‡∏ß‡∏¥‡πÄ‡∏Ñ‡∏£‡∏≤‡∏∞‡∏´‡πå‡∏≠‡∏≤‡∏£‡∏°‡∏ì‡πå‡πÅ‡∏ö‡∏ö‡πÄ‡∏£‡∏µ‡∏¢‡∏•‡πÑ‡∏ó‡∏°‡πå ‡∏à‡∏≤‡∏Å‡πÉ‡∏ö‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà‡∏Å‡∏•‡πâ‡∏≠‡∏á‡∏à‡∏±‡∏ö</li>
      </ol>
      <p>üí° <strong>‡πÄ‡∏Ñ‡∏•‡πá‡∏î‡∏•‡∏±‡∏ö:</strong> ‡πÉ‡∏´‡πâ‡πÄ‡∏î‡πá‡∏Å‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡∏™‡∏†‡∏≤‡∏û‡πÅ‡∏™‡∏á‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏°‡∏≤‡∏∞‡∏™‡∏°‡πÅ‡∏•‡∏∞‡∏£‡∏π‡πâ‡∏™‡∏∂‡∏Å‡∏ú‡πà‡∏≠‡∏ô‡∏Ñ‡∏•‡∏≤‡∏¢‡∏Ç‡∏ì‡∏∞‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô</p>
    </div>
  </div>

  <!-- Video + Loader -->
  <div class="video-wrapper">
    <img id="camera-stream" />
    <div class="loader-container" id="loader">
      <div class="loader"></div>
      <span>‡∏Å‡∏≥‡∏•‡∏±‡∏á‡πÇ‡∏´‡∏•‡∏î‡∏Å‡∏•‡πâ‡∏≠‡∏á...</span>
    </div>
  </div>

  <div class="icons"> <a href="camera.html"> <img src="/assets/camera_off.png" alt="Back" class="icon-img"> </a> </div>

  <!-- Footer -->
  <div class="bottom-footer">
    by ‡∏à‡∏±‡πà‡∏á‡∏ã‡∏µ‡πâ‡∏°‡∏±‡∏ô‡∏ï‡πâ‡∏≠‡∏á‡∏ñ‡∏≠‡∏ô
  </div>

  <script>
    const loader = document.getElementById('loader');
    const img = document.getElementById('camera-stream');
    const btn = document.getElementById('startBtn');
    const iconsDiv = document.querySelector('.icons'); 
    const iconImg = document.querySelector('.icon-img');
    const infoCard = document.querySelector('.info-card');

    btn.addEventListener('click', () => {
      //‡∏ã‡πà‡∏≠‡∏ô info-card
      infoCard.classList.add('hidden');

      //‡∏ã‡πà‡∏≠‡∏ô‡∏õ‡∏∏‡πà‡∏° Start Camera
      btn.style.display = "none";

      //‡πÅ‡∏™‡∏î‡∏á loader
      loader.classList.add('active');
      iconsDiv.style.display = 'block'; 
      iconImg.style.display = 'block';

      // ‡πÇ‡∏´‡∏•‡∏î stream ‡∏à‡∏≤‡∏Å Flask
      img.onload = () => {
        loader.classList.remove('active'); // ‡∏ã‡πà‡∏≠‡∏ô loader
        img.classList.add('active');       // ‡πÅ‡∏™‡∏î‡∏á image
      };
      img.src = "http://localhost:5000/video_feed"; // ‡∏õ‡∏£‡∏±‡∏ö‡∏ï‡∏≤‡∏° backend
    });
  </script>
</body>
</html>